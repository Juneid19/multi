<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>iframe tester</title>
    <link rel="stylesheet" href="https://public.codepenassets.com/css/reset-2.0.min.css">


  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Multi Radio - Vinyl Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --neon-color: #00f0ff;
      --neon-secondary: #ff00ff;
      --bg-primary: #667eea;
      --bg-secondary: #764ba2;
    }

    /* Hide FastCast default elements */
    .cc_streaminfo, 
    .cc_streaminfo_container, 
    [class*="cc_"] {
      display: none !important;
      visibility: hidden !important;
      position: absolute !important;
      left: -9999px !important;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: "Poppins", system-ui, sans-serif;
      color: #ffffff;
      overflow-x: hidden;
      overflow-y: auto;
      background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
      transition: background 1.5s ease;
      padding: 20px 10px;
    }

    /* ==================== PARTICLES ==================== */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.6);
      border-radius: 50%;
      animation: floatUp var(--duration, 15s) linear infinite;
      animation-delay: var(--delay, 0s);
    }

    @keyframes floatUp {
      0% {
        transform: translateY(100vh) rotate(0deg) scale(0);
        opacity: 0;
      }
      10% { opacity: 0.8; }
      90% { opacity: 0.5; }
      100% {
        transform: translateY(-100vh) rotate(720deg) scale(1);
        opacity: 0;
      }
    }

    /* ==================== MAIN CONTAINER ==================== */
    .player-wrapper {
      position: relative;
      width: 100%;
      max-width: 440px;
      padding: 25px 20px;
      border-radius: 28px;
      background: rgba(7, 7, 22, 0.9);
      box-shadow:
        0 25px 50px rgba(0, 0, 0, 0.6),
        0 0 50px rgba(0, 240, 255, 0.15);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* ==================== HEADER ==================== */
    .player-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .station-name {
      font-weight: 700;
      font-size: 1.2rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      text-shadow: 0 0 20px var(--neon-color);
      animation: titleGlow 2s ease-in-out infinite alternate;
    }

    @keyframes titleGlow {
      from { text-shadow: 0 0 15px var(--neon-color); }
      to { text-shadow: 0 0 30px var(--neon-color), 0 0 50px var(--neon-secondary); }
    }

    /* Theme Selector */
    .theme-selector {
      display: flex;
      gap: 5px;
    }

    .theme-btn {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.3);
      cursor: pointer;
      transition: all 0.3s;
    }

    .theme-btn:hover {
      transform: scale(1.2);
      border-color: #fff;
    }

    .theme-btn.active {
      border-color: #fff;
      box-shadow: 0 0 10px currentColor;
    }

    .theme-cyan { background: linear-gradient(135deg, #00f0ff, #0080ff); }
    .theme-pink { background: linear-gradient(135deg, #ff00ff, #ff0080); }
    .theme-green { background: linear-gradient(135deg, #00ff88, #00cc66); }
    .theme-orange { background: linear-gradient(135deg, #ff9500, #ff5e00); }
    .theme-purple { background: linear-gradient(135deg, #a855f7, #7c3aed); }

    /* ==================== STATION SELECTOR ==================== */
    .station-selector {
      display: flex;
      gap: 8px;
      margin-bottom: 18px;
      overflow-x: auto;
      padding: 5px 0;
      scrollbar-width: none;
    }

    .station-selector::-webkit-scrollbar {
      display: none;
    }

    .station-btn {
      flex-shrink: 0;
      padding: 8px 14px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.7);
      font-size: 0.72rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
      white-space: nowrap;
    }

    .station-btn:hover {
      background: rgba(255,255,255,0.15);
      color: #fff;
    }

    .station-btn.active {
      background: linear-gradient(135deg, var(--neon-color), var(--neon-secondary));
      color: #000;
      border-color: transparent;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(0, 240, 255, 0.3);
    }

    /* ==================== VINYL AREA ==================== */
    .player-main {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .vinyl-area {
      position: relative;
      width: 280px;
      height: 280px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 10px;
    }

    /* Neon Ring */
    .neon-ring {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: conic-gradient(
        var(--neon-color),
        var(--neon-secondary),
        #00ff99,
        var(--neon-color)
      );
      filter: blur(15px);
      opacity: 0.5;
      pointer-events: none;
      animation: rotateRing 10s linear infinite;
    }

    .player.playing .neon-ring {
      animation: rotateRing 8s linear infinite, neonPulse 2s ease-in-out infinite;
      opacity: 0.7;
    }

    @keyframes rotateRing {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes neonPulse {
      0%, 100% {
        opacity: 0.5;
        filter: blur(15px);
        transform: rotate(0deg) scale(0.98);
      }
      50% {
        opacity: 0.9;
        filter: blur(20px);
        transform: rotate(180deg) scale(1.03);
      }
    }

    /* Vinyl Disc - TIPIS */
    .vinyl {
      position: relative;
      width: 260px;
      height: 260px;
      border-radius: 50%;
      background: conic-gradient(from 0deg, #080808, #121212, #080808, #121212, #080808);
      box-shadow:
        0 0 0 3px #050505,
        0 0 0 5px #1a1a1a,
        inset 0 0 40px rgba(0,0,0,0.95),
        0 20px 40px rgba(0, 0, 0, 0.7);
    }

    /* Vinyl Grooves - Halus */
    .vinyl::before {
      content: "";
      position: absolute;
      inset: 2%;
      border-radius: 50%;
      background: repeating-radial-gradient(
        circle at center,
        transparent 0px,
        transparent 1px,
        rgba(255,255,255,0.012) 1px,
        rgba(255,255,255,0.012) 2px
      );
      pointer-events: none;
    }

    /* Center Hole */
    .vinyl::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      background: radial-gradient(circle, #ddd 0%, #666 40%, #222 100%);
      box-shadow: 0 0 10px rgba(0,0,0,0.8);
      z-index: 15;
    }

    .player.playing .vinyl {
      animation: spinVinyl 3s linear infinite;
    }

    @keyframes spinVinyl {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Cover Art - BESAR 75% */
    .cover-center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 75%;
      height: 75%;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid rgba(255,255,255,0.12);
      background: linear-gradient(135deg, #333, #111);
      box-shadow: 
        0 0 30px rgba(0,0,0,0.9),
        inset 0 0 20px rgba(0,0,0,0.5);
      z-index: 5;
    }

    .cover-center img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      opacity: 0;
      transition: opacity 0.6s ease;
    }

    .cover-center img.fade-in {
      opacity: 1;
    }

    /* Tonearm */
    .tonearm {
      position: absolute;
      right: -5px;
      top: 8px;
      width: 85px;
      height: 85px;
      transform-origin: 90% 12%;
      transform: rotate(-32deg);
      pointer-events: none;
      transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 20;
    }

    .player.playing .tonearm {
      transform: rotate(-5deg);
    }

    .tonearm-stem {
      position: absolute;
      width: 60px;
      height: 4px;
      background: linear-gradient(to right, #777, #bbb, #777);
      border-radius: 3px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.5);
      top: 10px;
      left: 6px;
    }

    .tonearm-head {
      position: absolute;
      width: 14px;
      height: 18px;
      border-radius: 2px;
      left: 0;
      top: 3px;
      background: linear-gradient(to bottom, #555, #222);
      box-shadow: 0 2px 5px rgba(0,0,0,0.6);
    }

    .tonearm-base {
      position: absolute;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      right: 0;
      top: 3px;
      background: radial-gradient(circle at 30% 30%, #888, #444, #1a1a1a);
      box-shadow: 0 3px 8px rgba(0,0,0,0.6);
    }

    /* ==================== AUDIO VISUALIZER ==================== */
    .visualizer-container {
      width: 100%;
      height: 45px;
      margin: 12px 0;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 2px;
      padding: 0 10px;
    }

    .visualizer-bar {
      width: 4px;
      min-height: 4px;
      background: linear-gradient(to top, var(--neon-color), var(--neon-secondary));
      border-radius: 2px;
      transition: height 0.1s ease;
    }

    .player.playing .visualizer-bar {
      animation: visualizerPulse var(--duration, 0.5s) ease infinite;
      animation-delay: var(--delay, 0s);
    }

    @keyframes visualizerPulse {
      0%, 100% { height: var(--min-height, 4px); }
      50% { height: var(--max-height, 40px); }
    }

    /* ==================== TRACK INFO ==================== */
    .track-info {
      text-align: center;
      width: 100%;
      max-width: 380px;
      padding: 0 10px;
    }

    .label-small {
      font-size: 0.65rem;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      color: rgba(255,255,255,0.5);
      margin-bottom: 6px;
    }

    .track-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: #ffffff;
      text-shadow: 0 0 15px rgba(255,255,255,0.3);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .track-title.fade-in {
      opacity: 1;
    }

    .track-artist {
      font-size: 0.85rem;
      color: var(--neon-color);
      margin-top: 4px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    .track-artist.fade-in {
      opacity: 1;
    }

    /* ==================== CONTROLS ==================== */
    .controls {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-top: 18px;
      flex-wrap: wrap;
    }

    /* Play Button */
    .play-btn {
      border: none;
      cursor: pointer;
      width: 68px;
      height: 68px;
      border-radius: 50%;
      font-size: 1.4rem;
      color: #0b1020;
      background: linear-gradient(135deg, var(--neon-color), var(--neon-secondary));
      box-shadow:
        0 8px 30px rgba(0, 240, 255, 0.4),
        0 0 25px rgba(255, 0, 255, 0.25);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.25s ease;
      position: relative;
      overflow: hidden;
    }

    .play-btn::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        45deg,
        transparent 30%,
        rgba(255,255,255,0.2) 50%,
        transparent 70%
      );
      transform: rotate(45deg);
      transition: all 0.5s;
      opacity: 0;
    }

    .play-btn:hover::before {
      opacity: 1;
      left: 100%;
    }

    .play-btn:hover {
      transform: scale(1.1);
      box-shadow:
        0 12px 40px rgba(0, 240, 255, 0.5),
        0 0 40px rgba(255, 0, 255, 0.35);
    }

    .play-btn:active {
      transform: scale(0.95);
    }

    .play-btn .icon {
      position: relative;
      z-index: 1;
      margin-left: 3px;
    }

    .player.playing .play-btn .icon {
      margin-left: 0;
    }

    /* Skip Buttons */
    .skip-btn {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.7);
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.25s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .skip-btn:hover {
      border-color: var(--neon-color);
      color: var(--neon-color);
      background: rgba(255,255,255,0.1);
      box-shadow: 0 0 15px rgba(0, 240, 255, 0.3);
    }

    /* Volume Control */
    .volume-control {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.05);
      padding: 10px 14px;
      border-radius: 25px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .volume-icon {
      font-size: 0.95rem;
      color: rgba(255,255,255,0.7);
      cursor: pointer;
      width: 20px;
      text-align: center;
      transition: color 0.3s;
    }

    .volume-icon:hover {
      color: var(--neon-color);
    }

    .volume-slider {
      width: 90px;
      height: 4px;
      -webkit-appearance: none;
      background: rgba(255,255,255,0.2);
      border-radius: 2px;
      cursor: pointer;
    }

    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--neon-color), var(--neon-secondary));
      box-shadow: 0 0 10px var(--neon-color);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .volume-slider::-webkit-slider-thumb:hover {
      transform: scale(1.2);
    }

    .volume-slider::-moz-range-thumb {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--neon-color), var(--neon-secondary));
      border: none;
      cursor: pointer;
    }

    .volume-text {
      font-size: 0.7rem;
      color: rgba(255,255,255,0.6);
      width: 32px;
      text-align: right;
    }

    /* ==================== EXTRA CONTROLS ==================== */
    .extra-controls {
      display: flex;
      gap: 8px;
      margin-top: 14px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .extra-btn {
      padding: 7px 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.05);
      color: rgba(255,255,255,0.7);
      font-size: 0.68rem;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .extra-btn:hover {
      border-color: var(--neon-color);
      color: #fff;
      background: rgba(255,255,255,0.1);
    }

    .extra-btn.active {
      background: linear-gradient(135deg, var(--neon-color), var(--neon-secondary));
      color: #000;
      border-color: transparent;
    }

    /* ==================== LIVE BADGE ==================== */
    .live-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 14px;
      padding: 6px 14px;
      background: rgba(255, 59, 59, 0.15);
      border-radius: 20px;
      border: 1px solid rgba(255, 59, 59, 0.3);
    }

    .live-dot {
      width: 8px;
      height: 8px;
      background: #ff3b3b;
      border-radius: 50%;
      animation: livePulse 1.5s ease-in-out infinite;
    }

    @keyframes livePulse {
      0%, 100% { 
        box-shadow: 0 0 0 0 rgba(255, 59, 59, 0.7);
        opacity: 1;
      }
      50% { 
        box-shadow: 0 0 0 8px rgba(255, 59, 59, 0);
        opacity: 0.7;
      }
    }

    .live-text {
      color: #ff3b3b;
      font-size: 0.62rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1.5px;
    }

    /* ==================== STATUS ==================== */
    .status-text {
      margin-top: 10px;
      font-size: 0.7rem;
      text-align: center;
      color: rgba(255,255,255,0.5);
      min-height: 1.2em;
    }

    /* ==================== SLEEP TIMER MODAL ==================== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(8px);
    }

    .modal-overlay.show {
      display: flex;
    }

    .modal-content {
      background: rgba(20, 20, 40, 0.98);
      padding: 25px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,0.15);
      max-width: 320px;
      width: 90%;
      text-align: center;
    }

    .modal-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--neon-color);
    }

    .timer-options {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .timer-btn {
      padding: 10px 18px;
      border-radius: 15px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.05);
      color: #fff;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.85rem;
    }

    .timer-btn:hover {
      border-color: var(--neon-color);
      background: rgba(255,255,255,0.1);
    }

    .timer-btn.active {
      background: linear-gradient(135deg, var(--neon-color), var(--neon-secondary));
      color: #000;
      border-color: transparent;
    }

    .modal-close {
      padding: 10px 25px;
      border-radius: 20px;
      border: none;
      background: rgba(255,255,255,0.1);
      color: #fff;
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.3s;
    }

    .modal-close:hover {
      background: rgba(255,255,255,0.2);
    }

    /* ==================== LOADING ==================== */
    .loading-spinner {
      display: none;
      width: 22px;
      height: 22px;
      border: 2px solid rgba(0,0,0,0.2);
      border-top-color: #000;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .player.loading .loading-spinner {
      display: block;
    }

    .player.loading .play-btn .icon {
      display: none;
    }

    /* ==================== RESPONSIVE ==================== */
    @media (max-width: 480px) {
      .player-wrapper {
        max-width: 360px;
        padding: 20px 15px;
      }

      .vinyl-area {
        width: 240px;
        height: 240px;
      }

      .vinyl {
        width: 220px;
        height: 220px;
      }

      .tonearm {
        display: none;
      }

      .station-name {
        font-size: 1rem;
      }

      .track-title {
        font-size: 0.95rem;
      }

      .controls {
        gap: 10px;
      }

      .play-btn {
        width: 58px;
        height: 58px;
        font-size: 1.2rem;
      }

      .skip-btn {
        width: 38px;
        height: 38px;
        font-size: 0.85rem;
      }

      .volume-slider {
        width: 70px;
      }

      .visualizer-container {
        height: 35px;
      }

      .extra-controls {
        gap: 6px;
      }

      .extra-btn {
        padding: 6px 10px;
        font-size: 0.62rem;
      }
    }
  </style>
</head>
<body>

  <!-- Background Particles -->
  <div class="particles" id="particles"></div>

  <!-- Hidden FastCast Element for Kiara 4U -->
  <span class="cc_streaminfo" data-type="song" data-username="kiarafm" id="fcast"></span>
  <script src="https://eu1.fastcast4u.com/system/streaminfo.js"></script>

  <div class="player-wrapper player" id="player">
    
    <!-- Header -->
    <div class="player-header">
      <div class="station-name" id="stationName">Kiara 4U</div>
      
      <!-- Theme Selector -->
      <div class="theme-selector">
        <div class="theme-btn theme-cyan active" data-theme="cyan" title="Cyan"></div>
        <div class="theme-btn theme-pink" data-theme="pink" title="Pink"></div>
        <div class="theme-btn theme-green" data-theme="green" title="Green"></div>
        <div class="theme-btn theme-orange" data-theme="orange" title="Orange"></div>
        <div class="theme-btn theme-purple" data-theme="purple" title="Purple"></div>
      </div>
    </div>

    <!-- Station Selector -->
    <div class="station-selector" id="stationSelector">
      <button class="station-btn active" data-station="kiara">üéµ Kiara 4U</button>
      <button class="station-btn" data-station="muarsipongi">üé∂ Muarsipongi</button>
      <button class="station-btn" data-station="firzamedan">üìª Firza Medan</button>
      <button class="station-btn" data-station="firzampc">üéß Firza MpC</button>
    </div>

    <div class="player-main">
      
      <!-- Vinyl Area -->
      <div class="vinyl-area">
        <div class="neon-ring"></div>

        <div class="vinyl">
          <div class="cover-center">
            <img id="coverArt" src="https://picsum.photos/300" alt="Cover Art">
          </div>
        </div>

        <!-- Tonearm -->
        <div class="tonearm">
          <div class="tonearm-head"></div>
          <div class="tonearm-stem"></div>
          <div class="tonearm-base"></div>
        </div>
      </div>

      <!-- Audio Visualizer -->
      <div class="visualizer-container" id="visualizer"></div>

      <!-- Track Info -->
      <div class="track-info">
        <div class="label-small">üéµ Now Playing</div>
        <div class="track-title" id="trackTitle">Kiara 4U</div>
        <div class="track-artist" id="trackArtist">Live Streaming</div>
      </div>

      <!-- Main Controls -->
      <div class="controls">
        <button class="skip-btn" id="prevBtn" title="Previous Station">‚èÆ</button>
        
        <button class="play-btn" id="playPauseBtn" title="Play/Pause">
          <span class="icon" id="playIcon">‚ñ∂</span>
          <div class="loading-spinner"></div>
        </button>
        
        <button class="skip-btn" id="nextBtn" title="Next Station">‚è≠</button>
      </div>

      <!-- Volume Control -->
      <div class="volume-control">
        <span class="volume-icon" id="muteBtn" title="Mute">üîä</span>
        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="80" />
        <span class="volume-text" id="volumeText">80%</span>
      </div>

      <!-- Extra Controls -->
      <div class="extra-controls">
        <button class="extra-btn" id="shuffleBtn" title="Shuffle Stations">üîÄ Shuffle</button>
        <button class="extra-btn" id="sleepBtn" title="Sleep Timer">üò¥ Sleep</button>
        <button class="extra-btn" id="favoriteBtn" title="Add to Favorites">ü§ç Favorite</button>
      </div>

      <!-- Live Badge -->
      <div class="live-badge">
        <div class="live-dot"></div>
        <span class="live-text" id="liveText">Live Radio</span>
      </div>

      <div class="status-text" id="statusText">Ready to play</div>
    </div>

    <!-- Audio Element -->
    <audio id="radioAudio" preload="none"></audio>
  </div>

  <!-- Sleep Timer Modal -->
  <div class="modal-overlay" id="sleepModal">
    <div class="modal-content">
      <div class="modal-title">üò¥ Sleep Timer</div>
      <div class="timer-options">
        <button class="timer-btn" data-minutes="15">15 min</button>
        <button class="timer-btn" data-minutes="30">30 min</button>
        <button class="timer-btn" data-minutes="45">45 min</button>
        <button class="timer-btn" data-minutes="60">1 hour</button>
        <button class="timer-btn" data-minutes="90">1.5 hour</button>
        <button class="timer-btn" data-minutes="0">Off</button>
      </div>
      <button class="modal-close" id="closeModal">Close</button>
    </div>
  </div>

  <script>
    // ==================== STATIONS CONFIG ====================
    const STATIONS = {
      kiara: {
        name: 'Kiara 4U',
        url: 'https://eu1.fastcast4u.com/proxy/kiarafm?mp=/1',
        fallbackCover: 'https://picsum.photos/seed/kiara/300',
        type: 'fastcast',
        username: 'kiarafm'
      },
      muarsipongi: {
        name: 'Muarsipongi',
        url: 'https://stream.zeno.fm/eus8arb1mkeuv',
        fallbackCover: 'https://picsum.photos/seed/muarsipongi/300',
        type: 'zeno',
        zenoId: 'eus8arb1mkeuv'
      },
      firzamedan: {
        name: 'Firza Radio Medan',
        url: 'https://stream.zeno.fm/vtoxx0qaqeltv',
        fallbackCover: 'https://picsum.photos/seed/firzamedan/300',
        type: 'zeno',
        zenoId: 'vtoxx0qaqeltv'
      },
      firzampc: {
        name: 'Firza MpC Radio',
        url: 'https://mpc1.mediacp.eu/stream/firzaradio',
        fallbackCover: 'https://picsum.photos/seed/firzampc/300',
        type: 'mediacp',
        apiUrl: 'https://mpc1.mediacp.eu:2000/json/stream/firzaradio'
      }
    };

    // ==================== THEMES CONFIG ====================
    const THEMES = {
      cyan: { neon: '#00f0ff', secondary: '#ff00ff', bgPrimary: '#667eea', bgSecondary: '#764ba2' },
      pink: { neon: '#ff00ff', secondary: '#ff6b6b', bgPrimary: '#f093fb', bgSecondary: '#f5576c' },
      green: { neon: '#00ff88', secondary: '#00d4ff', bgPrimary: '#11998e', bgSecondary: '#38ef7d' },
      orange: { neon: '#ff9500', secondary: '#ff5e00', bgPrimary: '#fa709a', bgSecondary: '#fee140' },
      purple: { neon: '#a855f7', secondary: '#7c3aed', bgPrimary: '#667eea', bgSecondary: '#764ba2' }
    };

    // ==================== BACKGROUND COLORS ====================
    const BG_COLORS = [
      { bg: 'linear-gradient(135deg, #667eea, #764ba2)', neon: '#667eea', secondary: '#764ba2' },
      { bg: 'linear-gradient(135deg, #f093fb, #f5576c)', neon: '#f093fb', secondary: '#f5576c' },
      { bg: 'linear-gradient(135deg, #4facfe, #00f2fe)', neon: '#4facfe', secondary: '#00f2fe' },
      { bg: 'linear-gradient(135deg, #fa709a, #fee140)', neon: '#fa709a', secondary: '#fee140' },
      { bg: 'linear-gradient(135deg, #30cfd0, #330867)', neon: '#30cfd0', secondary: '#330867' },
      { bg: 'linear-gradient(135deg, #a8edea, #fed6e3)', neon: '#a8edea', secondary: '#fed6e3' },
      { bg: 'linear-gradient(135deg, #ff9a9e, #fecfef)', neon: '#ff9a9e', secondary: '#fecfef' },
      { bg: 'linear-gradient(135deg, #00c6fb, #005bea)', neon: '#00c6fb', secondary: '#005bea' }
    ];

    // ==================== DOM ELEMENTS ====================
    const audio = document.getElementById('radioAudio');
    const player = document.getElementById('player');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const playIcon = document.getElementById('playIcon');
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeText = document.getElementById('volumeText');
    const muteBtn = document.getElementById('muteBtn');
    const statusText = document.getElementById('statusText');
    const coverArt = document.getElementById('coverArt');
    const trackTitle = document.getElementById('trackTitle');
    const trackArtist = document.getElementById('trackArtist');
    const stationNameEl = document.getElementById('stationName');
    const liveText = document.getElementById('liveText');
    const visualizer = document.getElementById('visualizer');
    const sleepModal = document.getElementById('sleepModal');

    // ==================== STATE ====================
    let currentStation = 'kiara';
    let currentTheme = 'cyan';
    let isPlaying = false;
    let isMuted = false;
    let lastVolume = 0.8;
    let lastTrack = '';
    let colorIndex = 0;
    let sleepTimer = null;
    let sleepMinutes = 0;
    let favorites = JSON.parse(localStorage.getItem('radioFavorites') || '[]');
    let zenoEventSource = null;
    let nowPlayingInterval = null;

    // ==================== INIT ====================
    function init() {
      createParticles();
      createVisualizer();
      loadStation(currentStation);
      applyTheme(currentTheme);
      setupEventListeners();
      
      audio.volume = volumeSlider.value / 100;
      
      setInterval(cycleBG, 15000);
    }

    // ==================== PARTICLES ====================
    function createParticles() {
      const container = document.getElementById('particles');
      container.innerHTML = '';
      
      for (let i = 0; i < 30; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = Math.random() * 100 + '%';
        p.style.width = (2 + Math.random() * 5) + 'px';
        p.style.height = p.style.width;
        p.style.setProperty('--delay', (Math.random() * 15) + 's');
        p.style.setProperty('--duration', (12 + Math.random() * 12) + 's');
        container.appendChild(p);
      }
    }

    // ==================== VISUALIZER ====================
    function createVisualizer() {
      visualizer.innerHTML = '';
      const barCount = 28;
      
      for (let i = 0; i < barCount; i++) {
        const bar = document.createElement('div');
        bar.className = 'visualizer-bar';
        
        const minH = 4 + Math.random() * 6;
        const maxH = 12 + Math.random() * 30;
        
        bar.style.setProperty('--min-height', minH + 'px');
        bar.style.setProperty('--max-height', maxH + 'px');
        bar.style.setProperty('--delay', (i * 0.04) + 's');
        bar.style.setProperty('--duration', (0.3 + Math.random() * 0.4) + 's');
        bar.style.height = minH + 'px';
        
        visualizer.appendChild(bar);
      }
    }

    // ==================== THEME ====================
    function applyTheme(themeName) {
      const theme = THEMES[themeName];
      if (!theme) return;
      
      document.documentElement.style.setProperty('--neon-color', theme.neon);
      document.documentElement.style.setProperty('--neon-secondary', theme.secondary);
      document.documentElement.style.setProperty('--bg-primary', theme.bgPrimary);
      document.documentElement.style.setProperty('--bg-secondary', theme.bgSecondary);
      document.body.style.background = `linear-gradient(135deg, ${theme.bgPrimary}, ${theme.bgSecondary})`;
      
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.theme === themeName);
      });
      
      currentTheme = themeName;
    }

    // ==================== STATION ====================
    function loadStation(stationKey) {
      const station = STATIONS[stationKey];
      if (!station) return;
      
      // Stop previous connections
      stopNowPlayingFetch();
      
      currentStation = stationKey;
      audio.src = station.url;
      stationNameEl.textContent = station.name;
      liveText.textContent = `Live ‚Ä¢ ${station.name}`;
      
      document.querySelectorAll('.station-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.station === stationKey);
      });
      
      // Reset track info
      trackTitle.textContent = station.name;
      trackArtist.textContent = 'Live Streaming';
      coverArt.src = station.fallbackCover;
      coverArt.classList.add('fade-in');
      trackTitle.classList.add('fade-in');
      trackArtist.classList.add('fade-in');
      
      lastTrack = '';
      
      // Start now playing fetch based on station type
      startNowPlayingFetch();
      
      if (isPlaying) {
        playAudio();
      }
      
      updateFavoriteBtn();
    }

    // ==================== NOW PLAYING FETCH ====================
    function stopNowPlayingFetch() {
      if (nowPlayingInterval) {
        clearInterval(nowPlayingInterval);
        nowPlayingInterval = null;
      }
      if (zenoEventSource) {
        zenoEventSource.close();
        zenoEventSource = null;
      }
    }

    function startNowPlayingFetch() {
      const station = STATIONS[currentStation];
      
      switch (station.type) {
        case 'fastcast':
          nowPlayingInterval = setInterval(fetchFastCast, 4000);
          setTimeout(fetchFastCast, 1000);
          break;
          
        case 'zeno':
          fetchZeno();
          nowPlayingInterval = setInterval(fetchZeno, 5000);
          connectZenoSSE();
          break;
          
        case 'mediacp':
          fetchMediaCP();
          nowPlayingInterval = setInterval(fetchMediaCP, 5000);
          break;
      }
    }

    // ==================== FASTCAST NOW PLAYING ====================
    async function fetchFastCast() {
      const fcast = document.getElementById('fcast');
      if (!fcast) return;
      
      const raw = fcast.innerText.trim();
      if (!raw) return;
      
      processNowPlaying(raw, null);
    }

    // ==================== ZENO NOW PLAYING ====================
    async function fetchZeno() {
      const station = STATIONS[currentStation];
      if (station.type !== 'zeno') return;
      
      try {
        const apiUrl = `https://api.zeno.fm/mounts/${station.zenoId}/now_playing`;
        
        const response = await fetch(apiUrl);
        if (response.ok) {
          const data = await response.json();
          if (data && data.now_playing) {
            const title = data.now_playing.title || data.now_playing.song || '';
            const artist = data.now_playing.artist || '';
            
            if (title) {
              const trackInfo = artist ? `${artist} - ${title}` : title;
              processNowPlaying(trackInfo, null);
            }
          }
        }
      } catch (e) {
        console.log('Zeno API error:', e);
      }
    }

    function connectZenoSSE() {
      const station = STATIONS[currentStation];
      if (station.type !== 'zeno') return;
      
      try {
        zenoEventSource = new EventSource(`https://api.zeno.fm/mounts/metadata/subscribe/${station.zenoId}`);
        
        zenoEventSource.onmessage = function(e) {
          try {
            const data = JSON.parse(e.data);
            if (data && data.streamTitle) {
              processNowPlaying(data.streamTitle, null);
            }
          } catch (err) {}
        };
        
        zenoEventSource.onerror = function() {
          if (zenoEventSource) {
            zenoEventSource.close();
            zenoEventSource = null;
          }
        };
      } catch (e) {
        console.log('SSE connection error:', e);
      }
    }

    // ==================== MEDIACP NOW PLAYING ====================
    async function fetchMediaCP() {
      const station = STATIONS[currentStation];
      if (station.type !== 'mediacp') return;
      
      try {
        const response = await fetch(station.apiUrl);
        if (response.ok) {
          const data = await response.json();
          
          console.log('MediaCP data:', data);
          
          // MediaCP struktur: { nowplaying: "Artist - Title", coverart: "url" }
          if (data.nowplaying) {
            const coverUrl = data.coverart || null;
            processNowPlaying(data.nowplaying, coverUrl);
          }
        }
      } catch (e) {
        console.log('MediaCP API error:', e);
      }
    }

    // ==================== PROCESS NOW PLAYING ====================
    async function processNowPlaying(raw, providedCover) {
      if (!raw || raw === lastTrack) return;
      
      let artist = 'Unknown Artist';
      let title = raw;
      
      // Parse "Artist - Title" format
      const separators = [' - ', ' ‚Äì ', ' ‚Äî ', ' | '];
      for (const sep of separators) {
        if (raw.includes(sep)) {
          const parts = raw.split(sep);
          artist = parts[0].trim();
          title = parts.slice(1).join(sep).trim();
          break;
        }
      }
      
      const trackKey = artist + ' - ' + title;
      if (trackKey === lastTrack) return;
      lastTrack = trackKey;
      
      // Fetch cover art
      let img = providedCover; // Gunakan cover dari API jika tersedia (MediaCP)
      
      // Jika tidak ada cover dari API, fetch dari Deezer/iTunes
      if (!img) {
        img = await getDeezerCover(artist, title);
        if (!img) {
          img = await getItunesCover(artist, title);
        }
      }
      
      const station = STATIONS[currentStation];
      
      // Fade out
      coverArt.classList.remove('fade-in');
      trackTitle.classList.remove('fade-in');
      trackArtist.classList.remove('fade-in');
      
      setTimeout(() => {
        coverArt.src = img || station.fallbackCover;
        trackTitle.textContent = title;
        trackArtist.textContent = artist;
        
        coverArt.classList.add('fade-in');
        trackTitle.classList.add('fade-in');
        trackArtist.classList.add('fade-in');
        
        changeBG(title + artist);
      }, 400);
    }

    // ==================== COVER ART ====================
    async function getDeezerCover(artist, title) {
      try {
        const q = `artist:"${artist}" track:"${title}"`;
        const url = 'https://api.deezer.com/search?q=' + encodeURIComponent(q);
        const r = await fetch(url);
        const j = await r.json();
        if (j.data && j.data.length > 0) {
          const alb = j.data[0].album || {};
          return alb.cover_xl || alb.cover_big || alb.cover_medium || null;
        }
      } catch (e) {}
      return null;
    }

    async function getItunesCover(artist, title) {
      try {
        const url = `https://itunes.apple.com/search?term=${encodeURIComponent(artist + ' ' + title)}&limit=1`;
        const r = await fetch(url);
        const data = await r.json();
        if (data.results && data.results.length > 0) {
          return data.results[0].artworkUrl100.replace('100x100', '600x600');
        }
      } catch (e) {}
      return null;
    }

    // ==================== BACKGROUND ====================
    function changeBG(seed) {
      const x = Math.abs(seed.split('').reduce((a, c) => a + c.charCodeAt(0), 0));
      const color = BG_COLORS[x % BG_COLORS.length];
      document.body.style.background = color.bg;
      document.documentElement.style.setProperty('--neon-color', color.neon);
      document.documentElement.style.setProperty('--neon-secondary', color.secondary);
    }

    function cycleBG() {
      colorIndex = (colorIndex + 1) % BG_COLORS.length;
      const color = BG_COLORS[colorIndex];
      document.body.style.background = color.bg;
    }

    // ==================== PLAY/PAUSE ====================
    function playAudio() {
      player.classList.add('loading');
      statusText.textContent = 'Connecting...';
      
      audio.play()
        .then(() => {
          isPlaying = true;
          player.classList.remove('loading');
          player.classList.add('playing');
          playIcon.textContent = '‚è∏';
          statusText.textContent = 'üéµ Playing...';
        })
        .catch(err => {
          console.error(err);
          player.classList.remove('loading');
          statusText.textContent = 'Failed. Tap to retry.';
        });
    }

    function pauseAudio() {
      audio.pause();
      isPlaying = false;
      player.classList.remove('playing');
      playIcon.textContent = '‚ñ∂';
      statusText.textContent = 'Paused';
    }

    function togglePlay() {
      if (audio.paused) {
        playAudio();
      } else {
        pauseAudio();
      }
    }

    // ==================== VOLUME ====================
    function updateVolume(value) {
      audio.volume = value / 100;
      volumeText.textContent = value + '%';
      
      if (value == 0) {
        muteBtn.textContent = 'üîá';
        isMuted = true;
      } else if (value < 50) {
        muteBtn.textContent = 'üîâ';
        isMuted = false;
      } else {
        muteBtn.textContent = 'üîä';
        isMuted = false;
      }
    }

    function toggleMute() {
      if (isMuted) {
        volumeSlider.value = lastVolume * 100;
        updateVolume(lastVolume * 100);
      } else {
        lastVolume = audio.volume;
        volumeSlider.value = 0;
        updateVolume(0);
      }
    }

    // ==================== STATION NAVIGATION ====================
    function prevStation() {
      const keys = Object.keys(STATIONS);
      const idx = keys.indexOf(currentStation);
      const newIdx = (idx - 1 + keys.length) % keys.length;
      loadStation(keys[newIdx]);
    }

    function nextStation() {
      const keys = Object.keys(STATIONS);
      const idx = keys.indexOf(currentStation);
      const newIdx = (idx + 1) % keys.length;
      loadStation(keys[newIdx]);
    }

    function shuffleStation() {
      const keys = Object.keys(STATIONS);
      let newStation;
      do {
        newStation = keys[Math.floor(Math.random() * keys.length)];
      } while (newStation === currentStation && keys.length > 1);
      
      loadStation(newStation);
      statusText.textContent = 'üîÄ Shuffled!';
    }

    // ==================== SLEEP TIMER ====================
    function setSleepTimer(minutes) {
      if (sleepTimer) {
        clearTimeout(sleepTimer);
        sleepTimer = null;
      }
      
      sleepMinutes = minutes;
      
      if (minutes > 0) {
        sleepTimer = setTimeout(() => {
          pauseAudio();
          statusText.textContent = 'üò¥ Sleep timer ended';
          sleepMinutes = 0;
          updateSleepBtn();
        }, minutes * 60 * 1000);
        
        statusText.textContent = `üò¥ Sleep in ${minutes} min`;
      } else {
        statusText.textContent = 'üò¥ Sleep timer off';
      }
      
      updateSleepBtn();
      sleepModal.classList.remove('show');
    }

    function updateSleepBtn() {
      const btn = document.getElementById('sleepBtn');
      btn.classList.toggle('active', sleepMinutes > 0);
      btn.textContent = sleepMinutes > 0 ? `üò¥ ${sleepMinutes}m` : 'üò¥ Sleep';
    }

    // ==================== FAVORITES ====================
    function toggleFavorite() {
      const idx = favorites.indexOf(currentStation);
      if (idx > -1) {
        favorites.splice(idx, 1);
        statusText.textContent = 'üíî Removed from favorites';
      } else {
        favorites.push(currentStation);
        statusText.textContent = '‚ù§Ô∏è Added to favorites';
      }
      localStorage.setItem('radioFavorites', JSON.stringify(favorites));
      updateFavoriteBtn();
    }

    function updateFavoriteBtn() {
      const btn = document.getElementById('favoriteBtn');
      const isFav = favorites.includes(currentStation);
      btn.classList.toggle('active', isFav);
      btn.textContent = isFav ? '‚ù§Ô∏è Favorited' : 'ü§ç Favorite';
    }

    // ==================== EVENT LISTENERS ====================
    function setupEventListeners() {
      playPauseBtn.addEventListener('click', togglePlay);
      
      volumeSlider.addEventListener('input', (e) => updateVolume(e.target.value));
      muteBtn.addEventListener('click', toggleMute);
      
      document.getElementById('prevBtn').addEventListener('click', prevStation);
      document.getElementById('nextBtn').addEventListener('click', nextStation);
      document.getElementById('shuffleBtn').addEventListener('click', shuffleStation);
      
      document.getElementById('sleepBtn').addEventListener('click', () => {
        sleepModal.classList.add('show');
      });
      
      document.getElementById('closeModal').addEventListener('click', () => {
        sleepModal.classList.remove('show');
      });
      
      document.querySelectorAll('.timer-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.timer-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          setSleepTimer(parseInt(btn.dataset.minutes));
        });
      });
      
      document.getElementById('favoriteBtn').addEventListener('click', toggleFavorite);
      
      document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.addEventListener('click', () => applyTheme(btn.dataset.theme));
      });
      
      document.querySelectorAll('.station-btn').forEach(btn => {
        btn.addEventListener('click', () => loadStation(btn.dataset.station));
      });
      
      // Audio events
      audio.addEventListener('play', () => {
        player.classList.add('playing');
        playIcon.textContent = '‚è∏';
      });
      
      audio.addEventListener('pause', () => {
        player.classList.remove('playing');
        playIcon.textContent = '‚ñ∂';
      });
      
      audio.addEventListener('waiting', () => {
        statusText.textContent = 'Buffering...';
      });
      
      audio.addEventListener('playing', () => {
        player.classList.remove('loading');
        statusText.textContent = 'üéµ Playing...';
      });
      
      audio.addEventListener('error', () => {
        player.classList.remove('loading', 'playing');
        statusText.textContent = 'Connection error. Tap play.';
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        switch(e.code) {
          case 'Space':
            e.preventDefault();
            togglePlay();
            break;
          case 'ArrowLeft':
            prevStation();
            break;
          case 'ArrowRight':
            nextStation();
            break;
          case 'ArrowUp':
            e.preventDefault();
            volumeSlider.value = Math.min(100, parseInt(volumeSlider.value) + 5);
            updateVolume(volumeSlider.value);
            break;
          case 'ArrowDown':
            e.preventDefault();
            volumeSlider.value = Math.max(0, parseInt(volumeSlider.value) - 5);
            updateVolume(volumeSlider.value);
            break;
          case 'KeyM':
            toggleMute();
            break;
        }
      });
      
      sleepModal.addEventListener('click', (e) => {
        if (e.target === sleepModal) {
          sleepModal.classList.remove('show');
        }
      });
    }

    // ==================== START ====================
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
    
  </body>
  
</html>
